{{- define "body" -}}

{{ $revealjsVersion := "5.1.0" }}
{{ $revealjsBaseURL := printf "https://cdnjs.cloudflare.com/ajax/libs/reveal.js/%s" $revealjsVersion }}

<body>
  {{- $content := .Content }}
  <!-- Remove the <hr /> tag generated by blackfriday for footnotes -->
  {{- $content := replace .Content "<div class=\"footnotes\">\n\n <hr />" "<div class=\"footnotes\">" -}}
  <!-- <code> blocks processed by Hugo's highlighter have a data-lang attribute. For those, we disable -->
  <!-- highlight.js by changing the language class to "nohighlight", and adding "data-noescape".       -->
  {{- $content := replaceRE `<code class="language-\w+" \s+data-lang="\w+" ` `<code class="nohighlight" data-noescape` $content -}} <!-- enable Highlight.js line numbers when the markdown code block language
  selection is followed by "{}" e.g. ```js{} -->
  {{- $content := replaceRE `(<code class="language-\w+){}(">)` `$1" data-line-numbers>` $content -}}
  <!-- enable Highlight.js line highlights when the language selection is followed by "{<line numbers>}" e.g. ```js{1,5-7} -->
  {{- $content := replaceRE `(<code class="language-\w+){(\S+)}(">)` `$1" data-line-numbers="$2">` $content -}}
  <!-- Support both <hr /> (blackfriday) and <hr> (mmark) -->
  {{- $content := replace $content " <hr>" " <hr />" -}}

  {{- $content := replace $content "<p>%auto-animate%</p>" " <script>document.currentScript.parentNode.setAttribute('data-auto-animate', '1');</script>" -}}

  <div class="reveal">
    <div class="slides">
      <!-- Split the processed content by <hr /> tag -->
      {{- range (split $content "<hr>") -}}
      <!-- Only wrap in <section> tag if not already wrapped by shortcode -->
      <section>
        {{- . | safeHTML -}}
      </section>
      {{- end -}}
    </div>
  </div>

  {{ with .Params.logo }}

  <style>
    #logo {
      position: absolute;
      top: 20px;
      left: 20px;
      width: 250px;
      max-width: 2rem;
      max-height: 2rem;
    }
  </style>

  <img id="logo" src="{{ . }}" alt="logo">

  {{ end }}

  <script src="{{ $revealjsBaseURL }}/reveal.js"></script>
  <script src="{{ $revealjsBaseURL }}/plugin/zoom/zoom.min.js"></script>
  <script src="{{ $revealjsBaseURL }}/plugin/math/math.min.js"></script>
  <link rel="stylesheet" href="{{ $revealjsBaseURL }}/reset.min.css"></link>
  <link rel="stylesheet" href="{{ $revealjsBaseURL }}/reveal.min.css"></link>
  <link rel="stylesheet" href="{{ $revealjsBaseURL }}/theme/black.min.css"></link>

  <script>
    Reveal.on('ready', () => {
      console.log('RevealJS iniciado')
    })
    Reveal.initialize({
      plugins: [
        RevealMath.KaTeX
      ]
    })
  </script>

</body>
{{- end -}}

{{- define "head" -}}
{{- end -}}
